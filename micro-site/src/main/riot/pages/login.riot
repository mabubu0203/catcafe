<login>
    <div class="ui card">
        <h2>login</h2>
        <div class="ui form">
            <form onsubmit={ handleSubmit }>
                <div class="field { errors.username && 'error' }">
                    <div class="ui left icon input">
                        <i class="user icon"></i>
                        <input
                                type="text"
                                name="username"
                                placeholder="Enter Username"
                                oninput={ handleInputUsername }
                        />
                    </div>
                    <su-validation-error name="username" errors="{ errors }" />
                </div>
                <div class="field { errors.password && 'error' }">
                    <div class="ui left icon input">
                        <i class="lock icon"></i>
                        <input
                                type="password"
                                name="password"
                                placeholder="Enter Password"
                                oninput={ handleInputPassword }
                        />
                    </div>
                    <su-validation-error name="password" errors="{ errors }" />
                </div>
                <div class="inline field">
                    <su-checkbox>Remember Me</su-checkbox>
                </div>
                <div class="inline field">
                    <button class="ui teal button">Login</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        import { router } from '@riotjs/route'
        const errorMessages = {
            username: ['The username field is required.'],
            password: ['The password field is required.']
        }
        export default {
            onBeforeMount() {
            },
            errors: {
                username: '',
                password: ''
            },
            handleInputUsername(e) {
                if (e.target.value.length > 0)
                    this.errors.username = ""
                else
                    this.errors.username = errorMessages.username
                this.update()
            },
            handleInputPassword(e) {
                if (e.target.value.length > 0)
                    this.errors.password = ""
                else
                    this.errors.password = errorMessages.password
                this.update()
            },
            handleSubmit(e) {
                e.preventDefault()
                const inputUsername = e.target.username.value
                const inputPassword = e.target.password.value
                if (inputUsername.length > 0 && inputPassword.length > 0) {
                    this.service.login()
                } else {
                    if (inputUsername.length === 0)
                        this.errors.username = errorMessages.username
                    if (inputPassword.length === 0)
                        this.errors.password = errorMessages.password
                    this.update()
                }
            }
        }
    </script>

</login>